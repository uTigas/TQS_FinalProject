<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Train Station Digital Signage</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        .gradient-bg {
            background: linear-gradient(45deg, rgb(45, 45, 45), rgb(65, 65, 65), rgb(85, 85, 85));
            background-size: 200% 200%;
            background-position: 0% 100%;
            animation: gradient-animation 20s ease infinite;
        }

        @keyframes gradient-animation {
            0% {
                background-position: 0% 100%;
            }
            50% {
                background-position: 100% 0%;
            }
            100% {
                background-position: 0% 100%;
            }
        }
    </style>
</head>

<body class="gradient-bg text-white">

    <div class="signage container">
        <div class="row mt-2">
            <div class="col-6">
                <h1 id="title"></h1>
            </div>
            <div class="col-6">
                <!-- current time -->
                <h1 class="text-center">Current Time-<span id="currentTime"></span></h1>
            </div>
            <!-- line -->
            <hr class="mb-4 shadow bg-white" style="height: 3px; border:none">
            <div id="trainSchedule">

            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>
        <script>
            var trainData = [
                { track: 1, train: "Express 101", arrival: "10:15 AM" },
                { track: 2, train: "Local 202", arrival: "10:20 AM" },
                { track: 3, train: "Express 303", arrival: "10:30 AM" },
                { track: 4, train: "Local 404", arrival: "10:45 AM" },
                { track: 5, train: "Express 505", arrival: "11:00 AM" },
                { track: 1, train: "Star Rail 606", arrival: "11:15 AM" },
                { track: 2, train: "Express 707", arrival: "11:30 AM" },
                { track: 3, train: "Local 808", arrival: "11:45 AM" },
                { track: 1, train: "Express 909", arrival: "12:00 PM" },
                { track: 5, train: "Local 1010", arrival: "12:15 PM" }
            ];
            let station = "Union Station";
            $(document).ready(function () {
                $("#title").text(station + " Arrivals");
                function renderTrainSchedule() {
                    var schedule = $("#trainSchedule");
                    var groupedData = trainData.reduce(function (acc, train) {
                        if (!acc[train.track]) {
                            acc[train.track] = [];
                        }
                        acc[train.track].push(train);
                        return acc;
                    }, {});
                    var r = "<div class=\"row\">";
                    console.log(groupedData);
                    for (var track in groupedData) {
                        r += makeTable("Track " + track, groupedData[track]);
                    }
                    r += "</div></div>";
                    schedule.empty();
                    schedule.append(r);
                }

                function makeTable(title, data) {
                    return "<div class=\"col-6 ps-1 pe-1\"><div class=\"mb-2 shadow-lg p-2 bg-dark rounded\">" +
                        "<h2>" + title + "</h2><hr>" +
                        "<table class=\"table table-striped table-dark\"><thead><tr>" +
                        "<th style=\"width: 80%\">Train</th><th style=\"width: 20%\">Arrival Time</th></tr></thead><tbody>"
                        + data.map(function (train) {
                            return "<td>" + train.train + "</td><td>" + train.arrival + "</td></tr>";
                        }).join("") +
                        "</tbody></table></div></div>";
                }
                $("#currentTime").text(new Date().toLocaleTimeString())
                renderTrainSchedule(trainData);
                setInterval(function () {
                    $("#currentTime").text(new Date().toLocaleTimeString());
                }, 1000);
            });
        </script>

</body>

</html>